<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="SV_UserTaggingImprovement" title="User Mentions Improvements" version_string="1.7.0" version_id="1070000" url="https://xenforo.com/community/resources/user-mentions-improvements-by-xon.4416/" install_callback_class="SV_UserTaggingImprovements_Installer" install_callback_method="install" uninstall_callback_class="SV_UserTaggingImprovements_Installer" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates>
    <template title="user_group_tagging"><![CDATA[<fieldset>
	<xen:checkboxunit label="" explain="{xen:phrase user_group_is_taggable_explain}">
		<xen:option name="sv_taggable" selected="{$userGroup.sv_taggable}">
			{xen:phrase user_group_is_taggable}
		</xen:option>
	</xen:checkboxunit>

	<xen:checkboxunit label="" explain="{xen:phrase user_group_is_private_explain}">
		<xen:option name="sv_private" selected="{$userGroup.sv_private}">
			{xen:phrase user_group_is_private}
		</xen:option>
	</xen:checkboxunit>

	<xen:textboxunit label="{xen:phrase user_group_small_avatar}" name="sv_avatar_s" value="{$userGroup.sv_avatar_s}" >
		<xen:explain>{xen:phrase user_group_small_avatar_explain}</xen:explain>
	</xen:textboxunit>

	<xen:if is="{$userGroup.sv_avatar_s}">
		<img src="{$userGroup.sv_avatar_s}?q={$userGroup.last_edit_date}" class="" />
	</xen:if>

	<xen:textboxunit label="{xen:phrase user_group_large_avatar}" name="sv_avatar_l" value="{$userGroup.sv_avatar_l}" >
		<xen:explain>{xen:phrase user_group_large_avatar_explain}</xen:explain>
	</xen:textboxunit>

	<xen:if is="{$userGroup.sv_avatar_l}">
		<img src="{$userGroup.sv_avatar_l}?q={$userGroup.last_edit_date}" class="" />
	</xen:if>
</fieldset>]]></template>
  </admin_templates>
  <admin_template_modifications>
    <modification template="option_template_registrationDefaults" modification_key="sv_ugi_option_template_registrationDefaults" description="" execution_order="4416" enabled="1" action="str_replace">
      <find><![CDATA[</xen:checkbox>
<br />]]></find>
      <replace><![CDATA[<xen:option name="{$fieldPrefix}[{$preparedOption.option_id}][sv_email_on_tag]" selected="{$value.sv_email_on_tag}">{xen:phrase sv_receive_email_when_mentioned}</xen:option>
<xen:option name="{$fieldPrefix}[{$preparedOption.option_id}][sv_email_on_quote]" selected="{$value.sv_email_on_quote}">{xen:phrase sv_receive_email_when_quoted}</xen:option>
$0]]></replace>
    </modification>
    <modification template="user_edit" modification_key="sv_ugi_user_edit" description="" execution_order="4416" enabled="1" action="preg_replace">
      <find><![CDATA[#[\t ]*<xen:option name="email_on_conversation".*?</xen:option>#]]></find>
      <replace><![CDATA[$0
<xen:option name="sv_email_on_tag" selected="{$user.sv_email_on_tag}" readonly="!{$xenOptions.sv_send_email_on_tagging}">{xen:phrase sv_receive_email_when_mentioned}</xen:option>
<xen:option name="sv_email_on_quote" selected="{$user.sv_email_on_quote}" readonly="!{$xenOptions.sv_email_on_quote}">{xen:phrase sv_receive_email_when_quoted}</xen:option>]]></replace>
    </modification>
    <modification template="user_group_edit" modification_key="sv_ugi_user_group_edit" description="" execution_order="15" enabled="1" action="preg_replace">
      <find><![CDATA[#(\s*)(<fieldset id="piGroups">)#si]]></find>
      <replace><![CDATA[$1<xen:include template="user_group_tagging" />
$1$2]]></replace>
    </modification>
  </admin_template_modifications>
  <code_events/>
  <code_event_listeners>
    <listener event_id="init_dependencies" execute_order="10" callback_class="SV_UserTaggingImprovements_Listener" callback_method="init_dependencies" active="1" hint="" description="BodyText hook"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_AlertHandler_ProfilePostComment" description="XenForo_AlertHandler_ProfilePostComment"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_BbCode_Formatter_Base" description="XenForo_BbCode_Formatter_Base"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_BbCode_Formatter_HtmlEmail" description="XenForo_BbCode_Formatter_HtmlEmail"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_BbCode_Formatter_Text" description="XenForo_BbCode_Formatter_Text"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_AlertHandler_DiscussionMessage_Post" description="XenForo_AlertHandler_DiscussionMessage_Post"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_AlertHandler_DiscussionMessage_ProfilePost" description="XenForo_AlertHandler_DiscussionMessage_ProfilePost"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="NixFifty_Tickets_AlertHandler_TicketMessage" description="NixFifty_Tickets_AlertHandler_TicketMessage"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="SV_ReportImprovements_AlertHandler_Report" description="SV_ReportImprovements_AlertHandler_Report"/>
    <listener event_id="load_class" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Html_Renderer_BbCode" description="XenForo_Html_Renderer_BbCode"/>
    <listener event_id="load_class_controller" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Account" description="XenForo_ControllerPublic_Account"/>
    <listener event_id="load_class_controller" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerAdmin_UserGroup" description="XenForo_ControllerAdmin_UserGroup"/>
    <listener event_id="load_class_controller" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Member" description="XenForo_ControllerPublic_Member"/>
    <listener event_id="load_class_controller" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerAdmin_User" description="XenForo_ControllerAdmin_User"/>
    <listener event_id="load_class_datawriter" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_User" description="XenForo_DataWriter_User"/>
    <listener event_id="load_class_datawriter" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_UserGroup" description="XenForo_DataWriter_UserGroup"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Post" description="XenForo_Model_Post"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_ProfilePost" description="XenForo_Model_ProfilePost"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_UserGroup" description="XenForo_Model_UserGroup"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_UserTagging" description="XenForo_Model_UserTagging"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Report" description="XenForo_Model_Report"/>
    <listener event_id="load_class_model" execute_order="4416" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="NixFifty_Tickets_Model_TicketMessage" description="NixFifty_Tickets_Model_TicketMessage"/>
    <listener event_id="load_class_model" execute_order="2147483641" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Alert" description="XenForo_Model_Alert"/>
    <listener event_id="load_class_model" execute_order="2147483643" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_ThreadWatch" description="XenForo_Model_ThreadWatch"/>
    <listener event_id="load_class_model" execute_order="2147483643" callback_class="SV_UserTaggingImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_ForumWatch" description="XenForo_Model_ForumWatch"/>
    <listener event_id="template_hook" execute_order="10" callback_class="SV_UserTaggingImprovements_Template" callback_method="template_hook" active="1" hint="sv_usergroup_list" description="sv_usergroup_list template hook"/>
  </code_event_listeners>
  <cron/>
  <email_templates>
    <template title="sv_user_quoted">
      <subject><![CDATA[{xen:phrase sv_quoted_email_subject,
	"username={$sender.username}",
	"board_title={$xenOptions.boardTitle}"
}]]></subject>
      <body_text><![CDATA[{xen:phrase sv_quoted_email_text,
	"receiver_username={$receiver.username}",
	"username={$sender.username}",
	"view_link={$viewLink}",
	"prefs_link={xen:link 'canonical:account/contact-details'}",
	"board_link={xen:link 'canonical:index'}",
	"board_title={$xenOptions.boardTitle}"
}]]></body_text>
      <body_html><![CDATA[<p style="margin-top: 0">{xen:phrase sv_quoted_email_html,
	'receiver_username={$receiver.username}',
	'sender=<a href="{xen:link canonical:members, $sender}" style="color: #176093; text-decoration: none">{$sender.username}</a>',
	'board=<a href="{xen:link canonical:index}" style="color: #176093; text-decoration: none">{$xenOptions.boardTitle}</a>'}</p>

<table cellpadding="10" cellspacing="0" border="0" width="100%" style="margin: 20px 0; background-color: #f0f7fc; border-top: 1px solid #d7edfc">
<tr>
	<td>
		<a href="{$viewLink}" style="
			display: block;
			float: {xen:if $emailIsRtl, right, left};
			padding: 5px 10px;
			background-color: #65a5d1;
			border: none;
			border-radius: 3px;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: white;
			text-decoration: none">{xen:phrase sv_view_content_that_mentioned_you}</a>
	</td>
	<td align="{xen:if $emailIsRtl, left, right}">
		<a href="{xen:link canonical:alerts}" style="
			display: block;
			padding: 5px 0;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: #176093;
			text-decoration: none">{xen:phrase sv_view_all_your_alerts}</a>
	</td>
</tr>
</table>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_quoted_email_html_footer_1,
	'board=<a href="{xen:link canonical:index}" style="color: #969696; text-decoration: underline">{$xenOptions.boardTitle}</a>'}</p>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_quoted_email_html_footer_2,
	'prefs_link={xen:link canonical:account/contact-details}',
	'link_style=color: #969696; text-decoration: underline'}</p>]]></body_html>
    </template>
    <template title="sv_user_quoted_message">
      <subject><![CDATA[{xen:phrase sv_quoted_email_subject,
	"username={$sender.username}",
	"board_title={$xenOptions.boardTitle}"
}]]></subject>
      <body_text><![CDATA[{xen:phrase sv_quoted_email_text_message,
	"message={$content.sv_snippet_text}",
	"receiver_username={$receiver.username}",
	"username={$sender.username}",
	"view_link={$viewLink}",
	"prefs_link={xen:link 'canonical:account/contact-details'}",
	"board_link={xen:link 'canonical:index'}",
	"board_title={$xenOptions.boardTitle}"
}]]></body_text>
      <body_html><![CDATA[<p style="margin-top: 0">{xen:phrase sv_quoted_email_html,
	'receiver_username={$receiver.username}',
	'sender=<a href="{xen:link canonical:members, $sender}" style="color: #176093; text-decoration: none">{$sender.username}</a>',
	'board=<a href="{xen:link canonical:index}" style="color: #176093; text-decoration: none">{$xenOptions.boardTitle}</a>'}</p>

<hr style="height: 1px; margin: 10px 0; border: 0; color: #D7EDFC; background-color: #D7EDFC" />

<table cellpadding="0" cellspacing="0" border="0" width="100%" style="margin: 10px 0 20px">
<tr valign="top">
	<td style="font-size: 13px; line-height: 1.231; padding-{xen:if $emailIsRtl, left, right}: 20px">
		<div style="
			background-color: #D7EDFC;
			border: 1px solid #D7EDFC;
			border-radius: 5px">
			<table cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td style="
					background-color: #F0F7FC;
					padding: 5px;
					border-radius: 4px">
					<a href="{xen:link canonical:members, $sender}" title="{$sender.username}"
						><img src="{xen:helper avatar, $sender, s, '', 1}" alt="{$sender.username}" title="{$sender.username}" style="
							width: 48px;
							height: 48px;
							background-color: #FCFCFF;
							border: 1px solid #A5CAE4;
							padding: 2px;
							border-radius: 4px"
						/></a>
					</td>
				</tr>
			</table>
			<span style="
				padding: 3px 5px;
				display: block"><!--{$sender.username}-->&nbsp;</span>
		</div>
	</td>
	<td width="100%" style="font-family: Georgia, 'Times New Roman', Times, serif; font-size: 11pt; line-height: 1.4">
		{xen:raw $content.sv_snippet_html}
	</td>
</tr>
</table>

<table cellpadding="10" cellspacing="0" border="0" width="100%" style="margin: 20px 0; background-color: #f0f7fc; border-top: 1px solid #d7edfc">
<tr>
	<td>
		<a href="{$viewLink}" style="
			display: block;
			float: {xen:if $emailIsRtl, right, left};
			padding: 5px 10px;
			background-color: #65a5d1;
			border: none;
			border-radius: 3px;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: white;
			text-decoration: none">{xen:phrase sv_view_content_that_mentioned_you}</a>
	</td>
	<td align="{xen:if $emailIsRtl, left, right}">
		<a href="{xen:link canonical:alerts}" style="
			display: block;
			padding: 5px 0;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: #176093;
			text-decoration: none">{xen:phrase sv_view_all_your_alerts}</a>
	</td>
</tr>
</table>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_quoted_email_html_footer_1,
	'board=<a href="{xen:link canonical:index}" style="color: #969696; text-decoration: underline">{$xenOptions.boardTitle}</a>'}</p>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_quoted_email_html_footer_2,
	'prefs_link={xen:link canonical:account/contact-details}',
	'link_style=color: #969696; text-decoration: underline'}</p>]]></body_html>
    </template>
    <template title="sv_user_tagged">
      <subject><![CDATA[{xen:phrase sv_tagged_email_subject,
	"username={$sender.username}",
	"board_title={$xenOptions.boardTitle}"
}]]></subject>
      <body_text><![CDATA[{xen:phrase sv_tagged_email_text,
	"receiver_username={$receiver.username}",
	"username={$sender.username}",
	"view_link={$viewLink}",
	"prefs_link={xen:link 'canonical:account/contact-details'}",
	"board_link={xen:link 'canonical:index'}",
	"board_title={$xenOptions.boardTitle}"
}]]></body_text>
      <body_html><![CDATA[<p style="margin-top: 0">{xen:phrase sv_tagged_email_html,
	'receiver_username={$receiver.username}',
	'sender=<a href="{xen:link canonical:members, $sender}" style="color: #176093; text-decoration: none">{$sender.username}</a>',
	'board=<a href="{xen:link canonical:index}" style="color: #176093; text-decoration: none">{$xenOptions.boardTitle}</a>'}</p>

<table cellpadding="10" cellspacing="0" border="0" width="100%" style="margin: 20px 0; background-color: #f0f7fc; border-top: 1px solid #d7edfc">
<tr>
	<td>
		<a href="{$viewLink}" style="
			display: block;
			float: {xen:if $emailIsRtl, right, left};
			padding: 5px 10px;
			background-color: #65a5d1;
			border: none;
			border-radius: 3px;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: white;
			text-decoration: none">{xen:phrase sv_view_content_that_mentioned_you}</a>
	</td>
	<td align="{xen:if $emailIsRtl, left, right}">
		<a href="{xen:link canonical:alerts}" style="
			display: block;
			padding: 5px 0;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: #176093;
			text-decoration: none">{xen:phrase sv_view_all_your_alerts}</a>
	</td>
</tr>
</table>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_tagged_email_html_footer_1,
	'board=<a href="{xen:link canonical:index}" style="color: #969696; text-decoration: underline">{$xenOptions.boardTitle}</a>'}</p>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_tagged_email_html_footer_2,
	'prefs_link={xen:link canonical:account/contact-details}',
	'link_style=color: #969696; text-decoration: underline'}</p>]]></body_html>
    </template>
    <template title="sv_user_tagged_message">
      <subject><![CDATA[{xen:phrase sv_tagged_email_subject,
	"username={$sender.username}",
	"board_title={$xenOptions.boardTitle}"
}]]></subject>
      <body_text><![CDATA[{xen:phrase sv_tagged_email_text_message,
	"message={$content.sv_snippet_text}",
	"receiver_username={$receiver.username}",
	"username={$sender.username}",
	"view_link={$viewLink}",
	"prefs_link={xen:link 'canonical:account/contact-details'}",
	"board_link={xen:link 'canonical:index'}",
	"board_title={$xenOptions.boardTitle}"
}]]></body_text>
      <body_html><![CDATA[<p style="margin-top: 0">{xen:phrase sv_tagged_email_html,
	'receiver_username={$receiver.username}',
	'sender=<a href="{xen:link canonical:members, $sender}" style="color: #176093; text-decoration: none">{$sender.username}</a>',
	'board=<a href="{xen:link canonical:index}" style="color: #176093; text-decoration: none">{$xenOptions.boardTitle}</a>'}</p>

<hr style="height: 1px; margin: 10px 0; border: 0; color: #D7EDFC; background-color: #D7EDFC" />

<table cellpadding="0" cellspacing="0" border="0" width="100%" style="margin: 10px 0 20px">
<tr valign="top">
	<td style="font-size: 13px; line-height: 1.231; padding-{xen:if $emailIsRtl, left, right}: 20px">
		<div style="
			background-color: #D7EDFC;
			border: 1px solid #D7EDFC;
			border-radius: 5px">
			<table cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td style="
					background-color: #F0F7FC;
					padding: 5px;
					border-radius: 4px">
					<a href="{xen:link canonical:members, $sender}" title="{$sender.username}"
						><img src="{xen:helper avatar, $sender, s, '', 1}" alt="{$sender.username}" title="{$sender.username}" style="
							width: 48px;
							height: 48px;
							background-color: #FCFCFF;
							border: 1px solid #A5CAE4;
							padding: 2px;
							border-radius: 4px"
						/></a>
					</td>
				</tr>
			</table>
			<span style="
				padding: 3px 5px;
				display: block"><!--{$sender.username}-->&nbsp;</span>
		</div>
	</td>
	<td width="100%" style="font-family: Georgia, 'Times New Roman', Times, serif; font-size: 11pt; line-height: 1.4">
		{xen:raw $content.sv_snippet_html}
	</td>
</tr>
</table>

<table cellpadding="10" cellspacing="0" border="0" width="100%" style="margin: 20px 0; background-color: #f0f7fc; border-top: 1px solid #d7edfc">
<tr>
	<td>
		<a href="{$viewLink}" style="
			display: block;
			float: {xen:if $emailIsRtl, right, left};
			padding: 5px 10px;
			background-color: #65a5d1;
			border: none;
			border-radius: 3px;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: white;
			text-decoration: none">{xen:phrase sv_view_content_that_mentioned_you}</a>
	</td>
	<td align="{xen:if $emailIsRtl, left, right}">
		<a href="{xen:link canonical:alerts}" style="
			display: block;
			padding: 5px 0;
			font-family: 'Trebuchet MS', Helvetica, Arial, sans-serif;
			font-size: 11px;
			color: #176093;
			text-decoration: none">{xen:phrase sv_view_all_your_alerts}</a>
	</td>
</tr>
</table>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_tagged_email_html_footer_1,
	'board=<a href="{xen:link canonical:index}" style="color: #969696; text-decoration: underline">{$xenOptions.boardTitle}</a>'}</p>

<p style="font-size: 11px; color: #969696">{xen:phrase sv_tagged_email_html_footer_2,
	'prefs_link={xen:link canonical:account/contact-details}',
	'link_style=color: #969696; text-decoration: underline'}</p>]]></body_html>
    </template>
  </email_templates>
  <email_template_modifications/>
  <optiongroups>
    <group group_id="SV_UserTaggingImprovements" display_order="132" debug_only="0"/>
    <option option_id="svUMIPermDeniedOnViewGroup" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="300"/>
    </option>
    <option option_id="sv_default_group_avatar_l" edit_format="textbox" data_type="string" can_backup="1">
      <default_value></default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="220"/>
    </option>
    <option option_id="sv_default_group_avatar_s" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>styles/default/sv/tagging/group_48.png</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="210"/>
    </option>
    <option option_id="sv_displayGroupAvatar" edit_format="onoff" data_type="boolean" can_backup="1" validation_class="SV_UserTaggingImprovements_Option_MiniAvatar" validation_method="verifyDisplayGroupAvatar">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="230"/>
    </option>
    <option option_id="sv_limit_quote_emails" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="120"/>
    </option>
    <option option_id="sv_mention_snippet_length" edit_format="spinbox" data_type="integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params>min=-1</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="130"/>
    </option>
    <option option_id="sv_send_email_on_quote" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value></default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="110"/>
    </option>
    <option option_id="sv_send_email_on_tagging" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="100"/>
    </option>
    <option option_id="sv_styleGroupUsername" edit_format="onoff" data_type="boolean" can_backup="1" validation_class="SV_UserTaggingImprovements_Option_MiniAvatar" validation_method="verifyDisplayGroupAvatar">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_UserTaggingImprovements" display_order="240"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="forum" permission_id="sv_EnableTagging" permission_type="flag" default_value="unset" interface_group_id="forumPermissions" display_order="99998"/>
      <permission permission_group_id="general" permission_id="sv_ReceiveTagAlertEmails" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="11230"/>
      <permission permission_group_id="general" permission_id="sv_TagUserGroup" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="11231"/>
      <permission permission_group_id="general" permission_id="sv_ViewPrivateGroups" permission_type="flag" default_value="unset" interface_group_id="generalModeratorPermissions" display_order="9"/>
      <permission permission_group_id="general" permission_id="sv_ViewPublicGroups" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="11232"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="option_group_SV_UserTaggingImprovements" version_id="1001101" version_string="1.0.11a"><![CDATA[User Mentions Improvements]]></phrase>
    <phrase title="option_group_SV_UserTaggingImprovements_description" version_id="1001101" version_string="1.0.11a"><![CDATA[User group mentions, emails on mentions]]></phrase>
    <phrase title="option_svUMIPermDeniedOnViewGroup" version_id="1060000" version_string="1.6.0"><![CDATA[Return permission denied instead of not found if lacking permissions to view a user group]]></phrase>
    <phrase title="option_svUMIPermDeniedOnViewGroup_explain" version_id="1060000" version_string="1.6.0"><![CDATA[If disabled, the @usergroup tag is also not rendered]]></phrase>
    <phrase title="option_sv_default_group_avatar_l" version_id="10000" version_string="1.0.0"><![CDATA[Default User Group Avatar (l)]]></phrase>
    <phrase title="option_sv_default_group_avatar_l_explain" version_id="10000" version_string="1.0.0"><![CDATA[The default user group avatar to use if no avatar when viewing the membership of a group]]></phrase>
    <phrase title="option_sv_default_group_avatar_s" version_id="10000" version_string="1.0.0"><![CDATA[Default User Group Avatar (s)]]></phrase>
    <phrase title="option_sv_default_group_avatar_s_explain" version_id="10000" version_string="1.0.0"><![CDATA[The default user group avatar to use if no avatar is set]]></phrase>
    <phrase title="option_sv_displayGroupAvatar" version_id="10000" version_string="1.0.0"><![CDATA[Display user group mini-avatars]]></phrase>
    <phrase title="option_sv_displayGroupAvatar_explain" version_id="10000" version_string="1.0.0"><![CDATA[]]></phrase>
    <phrase title="option_sv_limit_quote_emails" version_id="1040000" version_string="1.4.0"><![CDATA[Send quote emails only on unreplied threads]]></phrase>
    <phrase title="option_sv_limit_quote_emails_explain" version_id="1040000" version_string="1.4.0"><![CDATA[Only send quote alert emails if the user has not posted in that thread before.]]></phrase>
    <phrase title="option_sv_mention_snippet_length" version_id="1050000" version_string="1.5.0"><![CDATA[Mention/Quote Snippet length]]></phrase>
    <phrase title="option_sv_mention_snippet_length_explain" version_id="1050000" version_string="1.5.0"><![CDATA[On Mention/Quote emails, include a snippet this long<br/>
<br/>
0 to disable<br/>
-1 for all text]]></phrase>
    <phrase title="option_sv_send_email_on_quote" version_id="1040000" version_string="1.4.0"><![CDATA[Receive Quoted Alert Emails]]></phrase>
    <phrase title="option_sv_send_email_on_quote_explain" version_id="1040000" version_string="1.4.0"><![CDATA[Allows users to receive alert emails, when quoted. Requires users to opt-in to User Mention Emails under /account/contact-details as user]]></phrase>
    <phrase title="option_sv_send_email_on_tagging" version_id="1040000" version_string="1.4.0"><![CDATA[Receive User Mention Alert Emails]]></phrase>
    <phrase title="option_sv_send_email_on_tagging_explain" version_id="1040000" version_string="1.4.0"><![CDATA[Allows users to receive user mention alert emails. Users still require opt-in under /account/contact-details.]]></phrase>
    <phrase title="option_sv_styleGroupUsername" version_id="1040300" version_string="1.4.3"><![CDATA[Username styling for a mentioned group]]></phrase>
    <phrase title="option_sv_styleGroupUsername_explain" version_id="1010000" version_string="1.1.0"><![CDATA[Allows mentioned group names to have the same username styling applied]]></phrase>
    <phrase title="permission_forum_sv_EnableTagging" version_id="1060000" version_string="1.6.0"><![CDATA[[UMI] Enable user mentions]]></phrase>
    <phrase title="permission_general_sv_ReceiveTagAlertEmails" version_id="1060000" version_string="1.6.0"><![CDATA[[UMI] Receive quote or mention alert emails]]></phrase>
    <phrase title="permission_general_sv_TagUserGroup" version_id="1060000" version_string="1.6.0"><![CDATA[[UMI] Mention user groups]]></phrase>
    <phrase title="permission_general_sv_ViewPrivateGroups" version_id="1060000" version_string="1.6.0"><![CDATA[[UMI] View private user groups]]></phrase>
    <phrase title="permission_general_sv_ViewPublicGroups" version_id="1060000" version_string="1.6.0"><![CDATA[[UMI] View mentionable user group members]]></phrase>
    <phrase title="style_property_SV_GroupMiniAvatar_description_master" version_id="1010000" version_string="1.1.0"><![CDATA[Handles the style of the mini avatar with tags.]]></phrase>
    <phrase title="style_property_SV_GroupMiniAvatar_master" version_id="1010000" version_string="1.1.0"><![CDATA[User Group Mini Avatar]]></phrase>
    <phrase title="sv_PrivateUserGroup" version_id="10000" version_string="1.0.0"><![CDATA[Private Group]]></phrase>
    <phrase title="sv_quoted_email_html" version_id="1040000" version_string="1.4.0"><![CDATA[{receiver_username}, {sender} quoted you at {board}.]]></phrase>
    <phrase title="sv_quoted_email_html_footer_1" version_id="1040000" version_string="1.4.0"><![CDATA[This message was sent to you from {board} because your preferences are set to receive email when somebody quotes or mentions you.]]></phrase>
    <phrase title="sv_quoted_email_html_footer_2" version_id="1040000" version_string="1.4.0"><![CDATA[To stop receiving email, please <a href="{prefs_link}" style="{link_style}">edit your contact preferences</a>.]]></phrase>
    <phrase title="sv_quoted_email_subject" version_id="1040000" version_string="1.4.0"><![CDATA[You have been quoted by {username} at {board_title}]]></phrase>
    <phrase title="sv_quoted_email_text" version_id="1040000" version_string="1.4.0"><![CDATA[{receiver_username}, {username} quoted you at {board_title}.

To view the content you where quoted in, click here:
{view_link}

----------------------------------------------------------------------

This message was sent to you from {board_title} because your preferences are set to receive email when somebody quotes or mentions you.

To stop receiving email, please edit your account preferences:
{prefs_link}

{board_link}]]></phrase>
    <phrase title="sv_quoted_email_text_message" version_id="1050000" version_string="1.5.0"><![CDATA[{receiver_username}, {username} quoted you at {board_title}.

This is the message they posted:
----------------------------------------------------------------------
{message}
----------------------------------------------------------------------

To view the content you where quoted in, click here:
{view_link}

----------------------------------------------------------------------

This message was sent to you from {board_title} because your preferences are set to receive email when somebody quotes or mentions you.

To stop receiving email, please edit your account preferences:
{prefs_link}

{board_link}]]></phrase>
    <phrase title="sv_receive_email_is_disabled" version_id="10005" version_string="1.0.5"><![CDATA[You do not have permission to use this feature, but your choice is remembered.]]></phrase>
    <phrase title="sv_receive_email_when_mentioned" version_id="10000" version_string="1.0.0"><![CDATA[Receive email when mentioned]]></phrase>
    <phrase title="sv_receive_email_when_mentioned_explain" version_id="10000" version_string="1.0.0"><![CDATA[Email notifications when mentioned from threads, replies, profile posts, etc.]]></phrase>
    <phrase title="sv_receive_email_when_quoted" version_id="1040100" version_string="1.4.4"><![CDATA[Receive email when quoted]]></phrase>
    <phrase title="sv_receive_email_when_quoted_explain" version_id="1040100" version_string="1.4.1"><![CDATA[Email notifications when quoted from a threads]]></phrase>
    <phrase title="sv_tagged_email_html" version_id="10000" version_string="1.0.0"><![CDATA[{receiver_username}, {sender} mentioned you at {board}.]]></phrase>
    <phrase title="sv_tagged_email_html_footer_1" version_id="10000" version_string="1.0.0"><![CDATA[This message was sent to you from {board} because your preferences are set to receive email when somebody mentions you.]]></phrase>
    <phrase title="sv_tagged_email_html_footer_2" version_id="10000" version_string="1.0.0"><![CDATA[To stop receiving email, please <a href="{prefs_link}" style="{link_style}">edit your contact preferences</a>.]]></phrase>
    <phrase title="sv_tagged_email_subject" version_id="10000" version_string="1.0.0"><![CDATA[You have been mentioned by {username} at {board_title}]]></phrase>
    <phrase title="sv_tagged_email_text" version_id="1040000" version_string="1.4.0"><![CDATA[{receiver_username}, {username} mentioned you at {board_title}.

To view the content you where mentioned in, click here:
{view_link}

----------------------------------------------------------------------

This message was sent to you from {board_title} because your preferences are set to receive email when somebody mentions you.

To stop receiving email, please edit your account preferences:
{prefs_link}

{board_link}]]></phrase>
    <phrase title="sv_tagged_email_text_message" version_id="1050000" version_string="1.5.0"><![CDATA[{receiver_username}, {username} mentioned you at {board_title}.

This is the message they posted:
----------------------------------------------------------------------
{message}
----------------------------------------------------------------------

To view the content you where mentioned in, click here:
{view_link}

----------------------------------------------------------------------

This message was sent to you from {board_title} because your preferences are set to receive email when somebody mentions you.

To stop receiving email, please edit your account preferences:
{prefs_link}

{board_link}]]></phrase>
    <phrase title="sv_view_all_your_alerts" version_id="10000" version_string="1.0.0"><![CDATA[View all your alerts.]]></phrase>
    <phrase title="sv_view_content_that_mentioned_you" version_id="10000" version_string="1.0.0"><![CDATA[View content that mentioned you.]]></phrase>
    <phrase title="tagged_as_y_group" version_id="1040300" version_string="1.4.3"><![CDATA[As you are a member of the {group} usergroup.]]></phrase>
    <phrase title="user_group_is_private" version_id="10000" version_string="1.0.0"><![CDATA[Is Private]]></phrase>
    <phrase title="user_group_is_private_explain" version_id="1040300" version_string="1.4.3"><![CDATA[Only members of the group or administrators with the correct permission can view & mention this group]]></phrase>
    <phrase title="user_group_is_taggable" version_id="1040300" version_string="1.4.3"><![CDATA[Is mentionable]]></phrase>
    <phrase title="user_group_is_taggable_explain" version_id="1040300" version_string="1.4.3"><![CDATA[This group can be mentioned. Warning: not recommended for large groups]]></phrase>
    <phrase title="user_group_large_avatar" version_id="10000" version_string="1.0.0"><![CDATA[Large user group image]]></phrase>
    <phrase title="user_group_large_avatar_explain" version_id="10000" version_string="1.0.0"><![CDATA[Image to use when displaying the user group membership list]]></phrase>
    <phrase title="user_group_small_avatar" version_id="10000" version_string="1.0.0"><![CDATA[Small user group image]]></phrase>
    <phrase title="user_group_small_avatar_explain" version_id="1001101" version_string="1.0.11a"><![CDATA[Image to use when displaying the user group during mentions.]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties>
    <property property_name="SV_GroupMiniAvatar" property_type="css" definition="1" group_name="message" title="User Group Mini Avatar" description="Handles the style of the mini avatar with tags." css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="2" sub_group=""><![CDATA[{"extra":"background-size: 20px 20px;","height":"20px","margin-bottom":"-8px","margin-right":"2px","width":"20px"}]]></property>
  </style_properties>
  <templates>
    <template title="sv_members_usergroup" version_id="10000" version_string="1.0.0"><![CDATA[<xen:require css="member_list.css" />
<xen:require css="UserGroupTagging.css" />
<xen:title>{$userGroup.username}</xen:title>
<div class="section">
	<div class="pairsJustified">
		<dl class="TaggedUserGroupHeader">
			<xen:if is="{$userGroup.avatar_l}">
				<dt>
					<img src="{$userGroup.avatar_l}" />
				</dt>
			</xen:if>
			<xen:if is="{$userGroup.private}">
				<dd>
					{xen:phrase sv_PrivateUserGroup}
				</dd>
			</xen:if>
		</dl>
	</div>
	<ol class="memberList TaggedUserGroupMemberList">
		<xen:foreach loop="$users" value="$user">
			<xen:include template="member_list_item">
				<xen:set var="$noOverlay">1</xen:set>
			</xen:include>
		</xen:foreach>
	</ol>
</div>]]></template>
    <template title="sv_ugi_account_contact_details_messaging" version_id="1040100" version_string="1.4.1"><![CDATA[<xen:if is="{$CanEnableEmailOnTag} or {$visitor.sv_email_on_tag}">
<li>
	<label for="ctrl_sv_email_on_tag"><input type="checkbox" name="sv_email_on_tag" value="1" id="ctrl_sv_email_on_tag" {xen:checked '{$visitor.sv_email_on_tag}'} />
		{xen:phrase sv_receive_email_when_mentioned}</label>
	<p class="hint">
        {xen:phrase sv_receive_email_when_mentioned_explain}
        <xen:if is="!{$CanEnableEmailOnTag}">
            {xen:phrase sv_receive_email_is_disabled}
        </xen:if>
    </p>
</li>
</xen:if>
<xen:if is="{$CanEnableEmailOnQuote} or {$visitor.sv_email_on_quote}">
<li>
	<label for="ctrl_sv_email_on_quote"><input type="checkbox" name="sv_email_on_quote" value="1" id="ctrl_sv_email_on_quote" {xen:checked '{$visitor.sv_email_on_quote}'} />
		{xen:phrase sv_receive_email_when_quoted}</label>
	<p class="hint">
        {xen:phrase sv_receive_email_when_quoted_explain}
        <xen:if is="!{$CanEnableEmailOnQuote}">
            {xen:phrase sv_receive_email_is_disabled}
        </xen:if>
    </p>
</li>
</xen:if>]]></template>
    <template title="UserGroupTagging.css" version_id="10000" version_string="1.0.0"><![CDATA[.xenOverlay .TaggedUserGroupMemberList
{
	max-height: 300px; overflow-y: scroll;
}
]]></template>
    <template title="UserGroupTagging_MiniAvatar.css" version_id="1010000" version_string="1.1.0"><![CDATA[<xen:foreach loop="$groups" value="$group">
    <xen:if is="{$group.sv_taggable} AND !{$group.sv_private}">
    <xen:if is="!{$group.sv_avatar_s}">
    <xen:set var="$group.sv_avatar_s" value="{$xenOptions.sv_default_group_avatar_s}" />
    </xen:if>
    a.ug .style{$group.user_group_id} .groupImg {
      {xen:property SV_GroupMiniAvatar}
      background-image: url('{$group.sv_avatar_s}?q={$group.last_edit_date}');
      display:inline-block;
    }
    </xen:if>
</xen:foreach>]]></template>
    <template title="UserGroupTagging_MiniAvatarStub.css" version_id="1010000" version_string="1.1.0"><![CDATA[<xen:hook name="sv_usergroup_list" params="{xen:array 'template=UserGroupTagging_MiniAvatar.css'}" />]]></template>
  </templates>
  <public_template_modifications>
    <modification template="editor_js_setup" modification_key="SV_UserTagging_editor_js_setup" description="Copy &amp; paste support  for user group tags" execution_order="1000" enabled="1" action="str_replace">
      <find><![CDATA[<xen:require js="js/xenforo/bb_code_edit.js" />]]></find>
      <replace><![CDATA[<xen:if is="{$debugMode}">
	<xen:require js="js/SV/UserTagging/group_tagging.full.js" />
<xen:else />
	<xen:require js="js/SV/UserTagging/group_tagging.js" />
</xen:if>
$0]]></replace>
    </modification>
    <modification template="tiny_quattro_js_setup" modification_key="SV_UserTagging_tiny_quattro_js_setup" description="Copy &amp; paste support  for user group tags (TinyQuattro)" execution_order="10000" enabled="1" action="str_replace">
      <find><![CDATA[<xen:require js="js/sedo/tinyquattro/integration/loader.min.js{$mceVersion}" />]]></find>
      <replace><![CDATA[<xen:if is="{$debugMode}">
	<xen:require js="js/SV/UserTagging/group_tagging_tinyquattro.full.js{$mceVersion}" />
<xen:else />
	<xen:require js="js/SV/UserTagging/group_tagging_tinyquattro.js{$mceVersion}" />
</xen:if>
$0]]></replace>
    </modification>
    <modification template="account_contact_details" modification_key="sv_ugi_account_contact_details" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#(<xen:hook name="account_contact_details_messaging".*?)(\s*)(</xen:hook>)#si]]></find>
      <replace><![CDATA[$1$2<xen:include template="sv_ugi_account_contact_details_messaging"/>
$2$3]]></replace>
    </modification>
    <modification template="conversation_message_report" modification_key="sv_usergrouptag_conversation_message_report" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="editor" modification_key="sv_usergrouptag_editor" description="" execution_order="10000" enabled="1" action="str_replace">
      <find><![CDATA[{xen:if $editorOptions.json, 'data-options="{xen:escape {xen:helper json, $editorOptions.json}}"'}]]></find>
      <replace><![CDATA[$0 data-ac-url="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="xenforo.css" modification_key="sv_usergrouptag_groupav_css" description="Adds necessary CSS to all styles for the mini avatar with tags." execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:hook name="xenforo_css_extra" />]]></find>
      <replace><![CDATA[$0
<xen:include template="UserGroupTagging_MiniAvatarStub.css" />]]></replace>
    </modification>
    <modification template="member_report" modification_key="sv_usergrouptag_member_report" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="member_view" modification_key="sv_usergrouptag_member_view" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="navigation_visitor_tab" modification_key="sv_usergrouptag_navigation_visitor_tab" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="post_report" modification_key="sv_usergrouptag_post_report" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="profile_post" modification_key="sv_usergrouptag_profile_post" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="profile_post_report" modification_key="sv_usergrouptag_profile_post_report" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="report_view" modification_key="sv_usergrouptag_report_view" description="" execution_order="10000" enabled="1" action="preg_replace">
      <find><![CDATA[#class="[^"]*UserTagger[^"]*"#]]></find>
      <replace><![CDATA[$0 data-acurl="{xen:link members/group-find}"]]></replace>
    </modification>
    <modification template="alert_post_tag" modification_key="sv_usermentionimpov_alert_post_tag" description="Add group tagging bits" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#$#]]></find>
      <replace><![CDATA[$0
<xen:if is="{$extra.taggedGroupId}">
{xen:phrase tagged_as_y_group, 'group=<a href="{xen:link members, '', 'ug={$extra.taggedGroupId}'}" class="PopupItemLink">{$extra.taggedGroup}</a>'}
</xen:if>]]></replace>
    </modification>
    <modification template="alert_profile_post_comment_tag" modification_key="sv_usermentionimpov_alert_profile_post_comment_tag" description="" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#$#]]></find>
      <replace><![CDATA[$0
<xen:if is="{$extra.taggedGroupId}">
{xen:phrase tagged_as_y_group, 'group=<a href="{xen:link members, '', 'ug={$extra.taggedGroupId}'}" class="PopupItemLink">{$extra.taggedGroup}</a>'}
</xen:if>]]></replace>
    </modification>
    <modification template="alert_profile_post_tag" modification_key="sv_usermentionimpov_alert_profile_post_tag" description="Add group tagging bits" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#$#]]></find>
      <replace><![CDATA[$0
<xen:if is="{$extra.taggedGroupId}">
{xen:phrase tagged_as_y_group, 'group=<a href="{xen:link members, '', 'ug={$extra.taggedGroupId}'}" class="PopupItemLink">{$extra.taggedGroup}</a>'}
</xen:if>]]></replace>
    </modification>
    <modification template="alert_report_comment_tag" modification_key="sv_usermentionimpov_alert_report_comment_tag" description="Add group tagging bits" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#$#]]></find>
      <replace><![CDATA[$0
<xen:if is="{$extra.taggedGroupId}">
{xen:phrase tagged_as_y_group, 'group=<a href="{xen:link members, '', 'ug={$extra.taggedGroupId}'}" class="PopupItemLink">{$extra.taggedGroup}</a>'}
</xen:if>]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
